!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!  input file for decoding the helicity subsystem
!!  Of note in this file:
!!  HelicityDecodingMode : will tell which mode of decoding is in use
!!                       : for now it can be  InputRegisterMode, UserbitMode
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

!Need to set PATTERNPHASEOFFSET = 1 (when pattern hardware counter starts with 1) or 0 (when pattern number starts with 0)
!default value for PATTERNPHASEOFFSET = 1 is set within the code itself which works fine with regular injector/beamlin\
e/parity mock data
!uncomment below line only if phase number start from 0
PATTERNPHASEOFFSET=0
randseedbits=30

HelicityDecodingMode=InputRegisterMode
PatternPhase=4
!!!NumberPatternsDelayed=4

ROC=23
!
! Header=0xffb0b444
SKIP 1
! Header=0xffdaf000
SKIP 1
WORD, 0,  0, helicitydata,  ha_23input_register
! Header=0xfffca001
!  First HAPPEX scaler; 32 words, but no data we care about
SKIP 33
! Header=0xfadc1802
SKIP 51
! Header=0xffadc008
SKIP 49
! Header=0xfffbd000
!  HAPPEX timing board
SKIP 1
WORD, 0,  0, helicitydata,  ha_23tb_data
WORD, 0,  0, helicitydata,  ha_23tb_rampdelay
WORD, 0,  0, helicitydata,  ha_23tb_integratetime
WORD, 0,  0, helicitydata,  ha_23tb_oversample
WORD, 0,  0, helicitydata,  ha_23tb_dac16
WORD, 0,  0, helicitydata,  ha_23tb_dac12
! Header=0xfdacf000
!  HAPPEX BMW words
SKIP 1
WORD, 0,  0, helicitydata,  ha_23bmw_pulseclean
WORD, 0,  0, helicitydata,  ha_23bmw_obj_id
WORD, 0,  0, helicitydata,  ha_23bmw_value
WORD, 0,  0, helicitydata,  ha_23bmw_cycle
!
WORD, 0,  0, helicitydata,  ha_23cleandata
WORD, 0,  0, helicitydata,  ha_23scandata1
WORD, 0,  0, helicitydata,  ha_23scandata2
!
WORD, 0,  0, helicitydata,  ha_23ioctime
WORD, 0,  0, helicitydata,  ha_23ncnt


ROC=24
!
! Header=0xffdaf000
SKIP 1
WORD, 0,  0, helicitydata,  ha_input_register

! Header=0xfffca001
!  First HAPPEX scaler; 32 words, but no data
SKIP 33

! Header=0xffadc000
!  First HAPPEX adc; none in INJ crate
SKIP 1

! Header=0xfffbd000
!  HAPPEX timing board
SKIP 1
WORD, 0,  0, helicitydata,  ha_tb_data
WORD, 0,  0, helicitydata,  ha_tb_rampdelay
WORD, 0,  0, helicitydata,  ha_tb_integratetime
WORD, 0,  0, helicitydata,  ha_tb_oversample
WORD, 0,  0, helicitydata,  ha_tb_dac16
WORD, 0,  0, helicitydata,  ha_tb_dac12

! Header=0xfdacf000
!  HAPPEX BMW words
SKIP 1
WORD, 0,  0, helicitydata,  ha_bmw_pulseclean
WORD, 0,  0, helicitydata,  ha_bmw_obj_id
WORD, 0,  0, helicitydata,  ha_bmw_value
WORD, 0,  0, helicitydata,  ha_bmw_cycle
!
WORD, 0,  0, helicitydata,  ha_cleandata
WORD, 0,  0, helicitydata,  ha_scandata1
WORD, 0,  0, helicitydata,  ha_scandata2
!
WORD, 0,  0, helicitydata,  ha_ioctime
WORD, 0,  0, helicitydata,  ha_ncnt


!seed size is either 24 bit or 30 bit. default is 24 bit
!RandSeedBits=24
!RandSeedBits=30

ROC=31
Bank=0x3103

!
! module.type, module.num  chan.num, det.type, det.name
!
WORD, 0,  0, helicitydata,  input_register
WORD, 0,  0, helicitydata,  output_register
WORD, 0,  0, helicitydata,  MPS_counter
WORD, 0,  0, helicitydata,  PAT_counter
WORD, 0,  0, helicitydata,  PAT_phase
!  Runs starting in Summer2009 have these three counter words added.
WORD, 0,  0, helicitydata,  oversample_phase
WORD, 0,  0, helicitydata,  gate_counter
SKIP 1
!
WORD, 0,  0, helicitydata,  cleandata
WORD, 0,  0, helicitydata,  scandata1
WORD, 0,  0, helicitydata,  scandata2
SKIP 1
!END
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

!USER BIT MODE

!HelicityDecodingMode= UserbitMode    
!PatternPhase=4
!seed size is either 24 bit or 30 bit. default is 24 bit
!RandSeedBits=24
!RandSeedBits=30
!ROC=31
!Bank=0x3101
!
! module.type, module.num  chan.num, det.type, det.name
!
!WORD, 0,  0, helicitydata,  cleandata
!WORD, 0,  0, helicitydata,  scandata1
!WORD, 0,  0, helicitydata,  scandata2
!WORD, 0,  0, helicitydata,  scalerheader
!WORD, 0,  0, helicitydata,  scalercounter
!WORD, 0,  0, helicitydata,  userbit 
!END
 